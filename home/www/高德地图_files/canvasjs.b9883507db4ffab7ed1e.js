webpackJsonp([6],{46:function(t,a,e){(function(t,a,i,n,o){function r(t){t.preventDefault(),t.stopPropagation()}function s(){c.initMapEvent(),c.addBasicPlugin(),c.addContextMenu(),c.initHotsopt()}var c=e(9),d=e(51),l=e(50),p=e(31),u=e(13),h=e(24),f=t(".layerbox");s(),watch(a.serp,"data",function(){var t=a.serp.data;a.serp.classify,SPQ=a.serp.SPQ,c.clearAllOverlays(!0),SPQ?c.addOverlays(t):c.addOverlays(t)},!0),watch(a,"faves",function(){if("faves"==a.state){var t=a.faves;c.clearAllOverlays(!0),"1"==t.code&&(l.initFavData(),c.addFavMarker(t))}},0),watch(a,"city",function(){var t=a.adcode,e=a.city,i=new AMap.LngLat(e[0],e[1]);themap.panTo(i),"100000"==t?themap.setZoom(4):themap.setZoom(10)}),watch(a,"zoom",function(){var a=themap.get("zooms"),e=themap.getZoom();t(".zoom_map").removeClass("zoom_unable"),e==a[1]?t(".zoom_in_map").addClass("zoom_unable"):e==a[0]&&t(".zoom_out_map").addClass("zoom_unable")}),watch(a.markerState,"hover",function(){var t=a.markerState.hover.poiid;t?c.highlightOverlays(t):c.unHighlightOverlays(t)}),watch(a.markerState,"active",function(){var t=a.markerState.active.poiid;t?(c.activeOverlays(t),c.addInfowindow({id:t})):c.unActiveOverlays()},!0),watch(a.lineState,"active",function(){var t=a.lineState.active.lineid;if(t){var e=a.serp.busdata[t];c.clearOverlays(["polyline-bus","marker-busStop"]),c.addOverlays(e),a.lineState.active.lineid=!1}}),watch(a.favState,"poiid",function(){var t=a.favState.poiid;if(t){var e=u.favDatas[t],i=e.type;if("0"==i)c.activeOverlays(t),c.addInfowindow({id:t});else{var n=e.data.route_type;"0"==n?l.showFavBusline(t):l.showFavDir(t)}}else c.unActiveOverlays()}),watch(a,"direction",function(t,e,n,o){if(a.carState.activeindex=!1,a.busState.active=!1,a.busState.activeindex=!1,!i.isEmpty(n)){var r=a.direction.type;"car"==r?p.dirCarNew():"bus"==r?p.dirBusNew():"walk"==r&&p.dirWalk()}},!0),watch(a,"dirp",function(){if(a.dirp){var t=a.dirp.type,e="0";"car"==t?(p.clearCarTmc(),p.clearAllRoute(),p.addDirCarOverlaysNew(e),p.showAllRouteNew(),p.showAllRoutesTmcNew()):"bus"==t?i.isEmpty(a.dirp.buslist)&&i.isEmpty(a.dirp.routelist)||(e=a.busState.acticeindex||"0",p.addDirBusOverlaysNew(e)):"walk"==t&&(e=a.walkState.acticeindex||"0",p.addDirWalkOverlays(e)),p.creatDirQrcode(),a.mapToolLayer.traffic&&a.tileLayer.traffic.setOpacity(.6)}}),watch(a,"redir",function(){var t=a.redir.pos,e=a.redir.type;p.redir(t,e)}),watch(a.carState,"hover",function(){var t=a.carState.hover,e=a.carState.unhover;t?p.stepHighlight(t):(!a.carState.active||a.carState.active&&a.carState.active!=a.carState.unhover)&&p.stepUnHighlight(e)}),watch(a.carState,"active",function(){var e=a.carState.active;if(e)if("start"==e||"end"==e){var i=t(".plan").find("."+e).attr("id");c.addInfowindow({id:i})}else p.stepUnHighlight(),p.stepHighlight(e),c.addInfowindow({id:"step-"+e});else p.stepUnHighlight()}),watch(a.carState,"index",function(){var t=a.carState.index;t?p.routeHighlightNew(t):p.routeUnhighlight()}),watch(a.carState,"activeindex",function(){var t=a.carState.activeindex;t&&(p.clearAllRoute(),p.setCarRoute(t),p.addDirCarOverlaysNew(t),p.showAllRouteNew(),p.showAllRoutesTmcNew(),setTimeout(function(){p.creatDirQrcode()},200))}),watch(a.busState,"index",function(){var t=a.busState.index;t?p.routeHighlightNew(t):p.routeUnhighlight()}),watch(a.busState,"activeindex",function(){var t=a.busState.activeindex;t&&(a.markerState.active.poiid=!1,p.addDirBusOverlaysNew(t),setTimeout(function(){p.creatDirQrcode()},200))}),watch(a.walkState,"hover",function(){var t=a.walkState.hover,e=a.walkState.unhover;t?p.stepHighlight(t):(!a.walkState.active||a.walkState.active&&a.walkState.active!=a.walkState.unhover)&&p.stepUnHighlight(e)}),watch(a.walkState,"active",function(){var e=a.walkState.active;if(e)if("start"==e||"end"==e){var i=t(".plan").find("."+e).attr("id");c.addInfowindow({id:i})}else p.stepHighlight(e),c.addInfowindow({id:"step-"+e});else p.stepUnHighlight()}),watch(a.busState,"active",function(){var t=a.busState.active;t?p.stepFitviewBus(t):p.stepUnHighlightBus()}),watch(a.busState,"station",function(){var t=a.busState.station;t&&c.addInfowindow({id:t})}),watch(a.mapToolLayer,"traffic",function(){var e=a.mapToolLayer.traffic,i=f.find(".traffic");e?(t(".traffic_panel").css("display","block"),t("#traffic_current").trigger("click"),i.addClass("active"),a.mapToolLayer.more=!1):(t(".traffic_panel").css("display","none"),i.removeClass("active"),d.hideTrifficLayer(),d.hideTrifficForecastLayer())}),watch(a.mapToolLayer,"satellite",function(){var t=a.mapToolLayer.satellite;t?(d.showSatelliteLayer(),d.showRoadnetCheck(),d.showRoadnetLayer(),d.hideMapLayer()):(d.showMapLayer(),d.hideRoadnetCheck(),d.hideSatelliteLayer(),d.hideRoadnetLayer())}),watch(a.mapToolLayer,"subway",function(){var t=a.adcode.substr(0,4),e="http://map.amap.com/subway/index.html";a.subwayCity.indexOf(t)>-1&&(e+="?&"+t),window.open(e),a.mapToolLayer.more=!1}),watch(a,"fullscreen",function(){var e=a.fullscreen;e?t(".fullscreen").removeClass("full").addClass("notfull"):t(".fullscreen").removeClass("notfull").addClass("full")}),watch(a,"hotspotOpen",function(){a.hotspotOpen&&!function(){var t=2,a=function(){--t<1&&function(){e(22),e(21),e(18),e(19),e(20),e(23)}(e)};e.e(0,a),e.e(1,a)}()}),watch(a,"userinfo",function(){a.userinfo||c.clearAllOverlays()});var m=t("#themap");m.on("click",".infowindow-close",function(){a.markerState.active.poiid=!1,a.favState.poiid=!1,a.carState.active=!1,a.busState.active=!1,a.busState.station=!1,a.walkState.active=!1,c.colseInfowindow()}),m.on("mouseenter",".marker-normal",function(){var e=t(this).attr("id").split("-")[1];a.markerState.hover.poiid=e}).on("mouseleave",".marker-normal",function(){t(this).attr("id").split("-")[1],a.markerState.hover.poiid=!1}),m.on("mouseenter",".menu_item",function(){t(this).addClass("hover")}).on("mouseleave",".menu_item",function(){t(this).removeClass("hover")}),m.on("click",".menu_item",function(){u.contextMenu.close()}),m.on("click","#menuWhere",function(){var t=u.contextMenuPos;c.clearOverlays(["marker-tmp"]),c.addWhere(t)}),m.on("click","#menuNear",function(){var t=u.contextMenuPos;c.clearOverlays(["marker-tmp"]),c.addWhere(t)}),m.on("click","#menuSetCenter",function(){var t=u.contextMenuPos;themap.setCenter(t)}),m.on("click","#menuClearmap",function(){themap.clearMap()}),m.on("click","#menuClearDir",function(){t(this).hasClass("unable")||p.clearDirMenu()}),m.on("click",".menu_plan",function(){if(!t(this).hasClass("unable")){var a=u.contextMenuPos,e=t(this).attr("type"),i={type:e,pos:a};c.clearOverlays([e]),c.addPlanPlace(i)}}),t(".infowindow-wrap"),m.on("click",".poibtn-snaps",function(a){t(this).toggleClass("opened");var e=t(".poi-snaps");e.toggleClass("show"),e.hasClass("show")?e.slideDown():e.fadeOut(100),r(a)}),m.on("click",".poibtn-srharound",function(a){var e=t(".poibox.poi-iw .poi-tool");t(this).toggleClass("opened");var i=t(".poi-srharound");i.toggleClass("show"),i.hasClass("show")?e.height(65):e.height(30),r(a)}),m.on("click",".srharound-shortcut span",function(a){var e=t(this).text(),i=t(this).closest(".poi-srharound").find(".srharound-ipt:visible").val(e);i.focus(),t(".srharound-srhbtn").trigger("click")}),m.on("click",".srharound-srhbtn",function(e){var i=t.trim(t(".infowindow-body").find(".srharound-ipt:visible").val()),n=a.iwdata.pos||a.iwdata.location;""!=i&&(u.nearbyKeyword=i,a.fwd("/search?"+t.param({query:i,query_type:"RQBXY",longitude:n.lng,latitude:n.lat,city:a.adcode})))}),m.on("click",".busline_link",function(e){var i=t(this).text();a.fwd("/search?"+t.param({query:i,query_type:"TQUERY",city:a.adcode}))}),m.on("mouseenter",".amap-zoom-cursor",function(a){var e=t(".amap-zoom-mask").height();t(this).css("top",e+"px")}).on("mouseleave",".amap-zoom-cursor",function(a){var e=t(".amap-zoom-mask").height();t(this).css("top",e+"px")}),m.on("click",".poi-feedback",function(e){var i=t(this);t(".poibtn-snaps").trigger("click");var n=i.closest(".infowindow-body"),o=n.attr("pos").split(","),r=a.iwdata,s={id:n.attr("id")||r.id||"",name:n.attr("name")||r.name||"",address:n.attr("address")||r.address||"",tel:n.attr("tel")||r.tel||"",x:o[0]||r.pos.lng||"",y:o[1]||r.pos.lat||""},c=h.poi(s);window.open("http://map.amap.com"+c)}),m.on("click",".poibtn-planto, .poibtn-planfrom",function(e){var n=a.iwdata,o=n.name,r=n.id,s=n.pos||n.location;lnglat=[s.lng,s.lat].join(),adcode=a.adcode;var c={name:o,lnglat:lnglat,id:r,adcode:adcode,modxy:void 0},d=t(this).hasClass("poibtn-planto"),l={type:a.dir.type||"car"};if(d?(l.from=a.dir.from,l.to=c):(l.from=c,l.to=a.dir.to),!t("#amapBox").is(":visible"))return void a.fwd("/dir?"+t.param(l));var p=this;t(document.body),t(p),i.delay(function(){a.fwd("/dir?"+t.param(l))},500)}),m.on("click",".ma-page-next",function(a){var e=Number(t(this).closest(".ma-page").find(".ma-cur-page").attr("index")),i=e+1;c.openPlaceSearchInfowindow(i)}),m.on("click",".ma-page-up",function(a){var e=Number(t(this).closest(".ma-page").find(".ma-cur-page").attr("index")),i=e-1;c.openPlaceSearchInfowindow(i)}),m.on("click",".step-before",function(e){var i=a.dir.type;if(!t(this).hasClass("step-unable")){var n=t(this).closest(".step-tool").attr("cur"),o=Number(t(this).closest(".step-tool").attr("steps"));"to"==n?"car"==i?a.carState.active=o-1:"walk"==i?a.walkState.active=o-1:"bus"==i&&(a.busState.station="marker-plan-"+(o-2)):"0"==n?"car"==i?a.carState.active="start":"walk"==i&&(a.walkState.active="start"):"1"==n&&"bus"==i?a.busState.station="marker-plan-0":"car"==i?a.carState.active=(Number(n)-1).toString():"walk"==i?a.walkState.active=(Number(n)-1).toString():"bus"==i&&(a.busState.station="marker-plan-"+(Number(n)-1).toString())}}),m.on("click",".step-next",function(e){var i=a.dir.type;if(!t(this).hasClass("step-unable")){var n=t(this).closest(".step-tool").attr("cur"),o=Number(t(this).closest(".step-tool").attr("steps"));"from"==n?"car"==i?a.carState.active="0":"walk"==i?a.walkState.active="0":"bus"==i&&(a.busState.station="marker-plan-1"):(n=Number(t(this).closest(".step-tool").attr("cur")),n+1==o?"car"==i?a.carState.active="end":"walk"==i?a.walkState.active="end":a.busState.station="marker-plan-"+o:"car"==i?a.carState.active=n+1:"walk"==i?a.walkState.active=n+1:"bus"==i&&(a.busState.station="marker-plan-"+(n+1)))}}),m.on("click",".zoomin-btn",function(a){var e=Number(themap.getZoom());themap.zoomIn(),17==e&&t(this).text("缩小").removeClass("zoomin-btn").addClass("zoomout-btn")}),m.on("click",".zoomout-btn",function(a){var e=Number(themap.getZoom());themap.zoomOut(),12==e&&t(this).text("放大").removeClass("zoomout-btn").addClass("zoomin-btn")}),m.on("mouseenter",".dir_qrcode_tip",function(a){var e=t(this).find("canvas"),i=t(this).find(".dir_qr_text");e.stop(!1,!0),e.animate({height:"90px",width:"90px"},"fast",function(){i.slideDown(150)})}).on("mouseleave",".dir_qrcode_tip",function(a){var e=t(this).find("canvas"),i=t(this).find(".dir_qr_text");e.stop(!1,!0),i.hide(),e.animate({height:"60px",width:"60px"},"fast")});var v=t("#amapBox");v.on("mouseenter",".routeseg",function(){var e=t(this).attr("index"),i=a.dir.type;"car"==i?a.carState.hover=e:"walk"==i&&(a.walkState.hover=e)}).on("mouseleave",".routeseg",function(){var e=t(this).attr("index"),i=a.dir.type;"car"==i?(a.carState.hover=!1,a.carState.unhover=e):"walk"==i&&(a.walkState.hover=!1,a.walkState.unhover=e)}).on("click",".routeseg",function(){var e=t(this).attr("index"),i=a.dir.type;"car"==i?a.carState.active=e:"walk"==i&&(a.walkState.active=e)}),v.on("mouseenter",".route",function(){var e=t(this).attr("index"),i=a.dir.type;"walk"==i&&(a.walkState.hover=e)}).on("mouseleave",".route",function(){var e=t(this).attr("index"),i=a.dir.type;"walk"==i&&(a.walkState.hover=!1,a.walkState.unhover=e)}).on("click",".route",function(){var e=t(this).attr("index"),i=a.dir.type;"walk"==i&&(a.walkState.active=e)}),v.on("click",".bus-route",function(){var e=t(this).attr("index");a.busState.active=e}),v.on("click",".busstop",function(e){e.preventDefault(),e.stopPropagation();var i=t(this).attr("id");a.busState.station=i}),v.on("click",".start",function(){var t=a.dir.type;"car"==t?a.carState.active="start":"walk"==t&&(a.walkState.active="start")}),v.on("click",".end",function(){var t=a.dir.type;"car"==t?a.carState.active="end":"walk"==t&&(a.walkState.active="end")}),v.on("click",".alter_more",function(){var a=t(this).attr("id")&&t(this).attr("id").split("_"),e=a[0],i=a[1],n="1",o=t(this).attr("index"),r={sstid:e,tstid:i,order:n},s=!0;p.getAlterRail(r,o,s)}),v.on("click",".order_item",function(){var a=t(this).attr("id"),e=t(this).attr("order");t(".order_item").removeClass("up down"),"leave"==a?"1"==e?t(this).addClass("down").attr("order",2):t(this).addClass("up").attr("order",1):"arrive"==a?"3"==e?t(this).addClass("down").attr("order",4):t(this).addClass("up").attr("order",3):"spend"==a&&("5"==e?t(this).addClass("down").attr("order",6):t(this).addClass("up").attr("order",5));var i=t(this).attr("order"),n=t(this).closest(".alter_bus_wrap").attr("from"),o=t(this).closest(".alter_bus_wrap").attr("to"),r={sstid:n,tstid:o,order:i},s=!1;p.getAlterRail(r,"",s)}),v.on("click",".alter_item",function(){var e=t(this).attr("id").split("_")[1],i=t(this).closest(".alter_bus_wrap").attr("index").split("_"),n=t.extend(!0,{},a.alterBus.data.railways[e]),o=t.extend(!0,{},a.dirapip);o.data.routelist[i[0]].segments[i[1]][1][1]=n,o.data.curopen=i[0],p.hideAlterBox(),p.buildBusDataNew(o)}),v.on("click",".alter_bus_close",function(){p.hideAlterBox()}),watch(a.mapToolLayer,"smog",function(){var t=f.find(".layer_item.smog");a.mapToolLayer.smog?t.addClass("active"):t.removeClass("active"),a.mapToolLayer.more=!1}),watch(a.mapToolLayer,"more",function(){var t=f.find(".item.more"),e=f.find(".hide-list"),i=a.mapToolLayer.more;i?(t.addClass("active"),e.slideDown("fast"),a.mapToolLayer.traffic=!1):(t.removeClass("active"),e.hide())}),watch(a.mapToolLayer,"faves",function(){var t=a.mapToolLayer.faves,e=f.find(".faves"),i="/faves",o=n.current||"";t?(e.addClass("active"),o.match(new RegExp("^"+i))||n("/faves")):(e.removeClass("active"),a.state==a.FAVES&&n("/")),a.mapToolLayer.more=!1}),f.on("click",".layer_item",function(){var e=t(this).data("type")||"";"weather"!=e&&(t(this).hasClass("active")?(t(this).removeClass("active"),a.mapToolLayer[e]=!1):(o.trace({type:"event",category:"tool",action:"click",label:e}),"smog"!==e&&o.trace({type:"view",pid:e}),t(this).addClass("active"),a.mapToolLayer[e]=!0),"smog"==e&&(a.mapToolLayer[e]?a.fwd("/events/smog"):a.fwd("/")))}),f.on("click",".traffic_item",function(){var a=t(this).attr("type");t(".traffic_item").removeClass("active"),t(this).addClass("active"),"current"==a?(d.hideTrifficForecastLayer(),d.addTrafficCurrent()):"forecast"==a&&(d.hideTrifficLayer(),d.addTrafficForecast())}),f.on("click",".week_item",function(){var a=t(this).attr("value"),e=t(this).attr("text");t(".week").attr("value",a).text("星期"+e),t(".week_item").removeClass("select"),t(this).addClass("select"),d.reshowTrifficForecastLayer()}),f.on("click",".roadnet",function(t){t.stopPropagation()}),f.on("click",".tool_item",i.throttle(function(e){e.preventDefault(),e.stopPropagation();var i=t(this).data("type")||"";switch(i){case"ranging":t(this).hasClass("active")?(t(this).removeClass("active"),d.offRangingTool(),d.removePromptMarker()):(t(this).addClass("active"),d.addPromptMarker(),d.addRangingTool()),a.mapToolLayer.more=!1;break;case"fullscreen":a.realfullscreen=!0}o.trace({type:"event",category:"tool",action:"click",label:i})},600,{trailing:!1})),t("#exitFullscreen").on("click",function(){a.realfullscreen=!1}),f.on("click",".item.more",function(){var t=a.mapToolLayer.more;return a.mapToolLayer.more=!t,!1}),f.on("click",".item.faves",function(){var t=a.mapToolLayer.faves;return a.panel.firstShow=0,a.mapToolLayer.faves=!t,!1}),f.on("click","#roadnet",function(){var a=t(this).hasClass("checked");a?(t(this).removeClass("checked"),d.hideRoadnetLayer()):(t(this).addClass("checked"),d.showRoadnetLayer())});var g=t("#scalebox");g.on("click",".zoom_map",function(){var a=t(this).attr("type");"in"==a?themap.zoomIn():"out"==a&&themap.zoomOut()});var y=t(document),w={};y.on("click",".smsit",function(){w.type="poi",w.tabType="sms",e.e(12,function(){var t=e(15);t.apply(this,[w])})}).on("click",".poi-sendcar",function(){w.type="poi",w.tabType="auto",e.e(12,function(){var t=e(15);t.apply(this,[w])})}).on("click",".poi-share",function(){w.type="poi",w.tabType="share",e.e(12,function(){var t=e(15);t.apply(this,[w])}),t(".poibtn-snaps").trigger("click")})}).call(a,e(1),e(2),e(3),e(5),e(6))},50:function(t,a,e){(function(a,i){function n(t,e){var i=/^[-]*\d+$/,n=new a.favapi.VirtualEarthProjection;if(i.test(t)&&i.test(e)){var o=n.PixelsToLatLong(t,e,20);return o.lo+","+o.la}return t+","+e}var o=e(13),r={routetype:{0:"busline",1:"car",2:"bus",3:"walk"},initFavData:function(){var t=o,e=a.faves;i.each(e.info.data,function(a,e){t.favDatas[e.id]=e})},showFavDir:function(t){var e=this,r=o,s=r.favDatas[t].data,c=s.route_type,d=s.from_poi,l=s.to_poi,p=s.method;if("0"!=c){var u={type:e.routetype[c],policy:p,from:{name:d.mName,id:d.mId,adcode:d.CityCode,modxy:null,lnglat:n(d.mx,d.my)},to:{name:l.mName,id:l.mId,adcode:l.CityCode,modxy:null,lnglat:n(l.mx,l.my)}};a.fwd("/dir?"+i.param(u))}},showFavBusline:function(t){var e=o,n=e.favDatas[t].data,r=n.key_name;r?a.fwd("/search?"+i.param({query:r,query_type:"TQUERY"})):toastr.warning("抱歉，没有此条线路！")},showFavPoi:function(){}};t.exports=r}).call(a,e(2),e(1))},51:function(t,a,e){(function(a,i){e(110);var n=e(7),o=e(13),r={week:{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",0:"日",7:"日"},trifficType:"current",rangingNode:0,mousemove:null,initTimeDrag:function(){var t=this,e=new Date,i=e.getHours().toString();a("#time_drag").Ranged({min:-12,max:12,step:1,value:i-12,onChange:function(t){t=(t+12).toString(),a(".time").attr("value",t),t.length<2&&(t="0"+t),a(".thumb-time, .time").text(t+":00")},onDragStart:function(t){},onDragEnd:function(a){t.reshowTrifficForecastLayer()}}),i.length<2&&(i="0"+i),a(".thumb-time, .time").text(i+":00")},showTrifficLayer:function(){var t="traffic";if(i.tileLayer[t])i.tileLayer[t].reload();else{var e=new AMap.TileLayer.Traffic({type:"overlayer",id:t,detectRetina:!1,zIndex:4,autoRefresh:!0,interval:30,map:themap});i.tileLayer[t]=e,AMap.event.addListener(e,"refresh",function(t){var e=new Date,i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=e.getHours(),s=e.getMinutes().toString();1==s.length&&(s="0"+s);var c=i+"/"+n+"/"+o,d=r+":"+s;a(".traffic_current_wrap").find(".date").html(c),a(".traffic_current_wrap").find(".time").html(d)})}"dir"==i.state&&i.tileLayer[t].setOpacity(.6),i.tileLayer[t].show()},hideTrifficLayer:function(){i.tileLayer.traffic&&i.tileLayer.traffic.hide()},showTrifficForecastLayer:function(t){var a=t.day,e=t.hour,n="TrifficForecast";"24"==e&&(a=Number(a)+1,"8"==a&&(a="1"),e="0"),"0"==a&&(a="7");var o="http://history.traffic.amap.com/traffic?type=2&day="+a+"&hh="+e+"&mm=0&x=[x]&y=[y]&z=[z]";if(i.tileLayer[n])i.tileLayer[n].setTileUrl(o+"&ra="+Math.random()),i.tileLayer[n].reload();else{var r=new AMap.TileLayer({type:"overlayer",id:n,getTileUrl:o,detectRetina:!1,zIndex:110,map:themap,zooms:[6,17]});i.tileLayer[n]=r}"dir"==i.state&&i.tileLayer[n].setOpacity(.6),i.tileLayer[n].show()},reshowTrifficForecastLayer:function(){var t=this,e={day:a(".week").attr("value"),hour:a(".time").attr("value")};t.showTrifficForecastLayer(e)},hideTrifficForecastLayer:function(){i.tileLayer.TrifficForecast&&i.tileLayer.TrifficForecast.hide()},addTrafficCurrent:function(){var t=this,e=new Date,i=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),s=e.getHours(),c=e.getMinutes().toString();1==c.length&&(c="0"+c),t.showTrifficLayer(),n.tplLoad({filename:"canvas-trafficCurrent",data:{date:i+"/"+o+"/"+r,time:s+":"+c},callback:function(t){a(".panel_body").html(t)}})},addTrafficForecast:function(){var t=this,e=new Date,i=e.getDay(),o=e.getHours(),r={day:i,hour:o};t.showTrifficForecastLayer(r),n.tplLoad({filename:"canvas-trafficForecast",data:{day:i,time:o+":00",timevalue:o},callback:function(e){a(".panel_body").html(e),t.initTimeDrag()}})},showMapLayer:function(){var t="mapLayer";i.tileLayer[t]&&i.tileLayer[t].setMap(themap)},hideMapLayer:function(){var t="mapLayer";i.tileLayer[t]&&i.tileLayer[t].setMap(null)},showSatelliteLayer:function(){var t="satellite";i.tileLayer[t]?i.tileLayer[t].setMap(themap):i.tileLayer[t]=new AMap.TileLayer.Satellite({detectRetina:!1,zIndex:2,map:themap}),a("#themap").find("#mapCode").html(i.satelliteCode)},hideSatelliteLayer:function(){i.tileLayer.satellite&&i.tileLayer.satellite.setMap(null),a("#themap").find("#mapCode").html(i.mapCode)},showRoadnetCheck:function(){var t=a("#roadnet");t.addClass("checked"),t.velocity("transition.slideRightBigIn")},hideRoadnetCheck:function(){var t=a("#roadnet");t.velocity("transition.slideRightBigOut")},checkRoadnet:function(){},uncheckRoadnet:function(){},showRoadnetLayer:function(){var t="roadNet";i.tileLayer[t]?i.tileLayer[t].setMap(themap):i.tileLayer[t]=new AMap.TileLayer.RoadNet({detectRetina:!1,zIndex:3,map:themap})},hideRoadnetLayer:function(){i.tileLayer.roadNet&&i.tileLayer.roadNet.setMap(null)},addRangingTool:function(){var t=this;themap.plugin(["AMap.RangingTool"],function(){var e={content:'<div style="width: 13px; height: 13px; overflow: hidden; position: relative; z-index: 1;"><img src="/assets/img/stadiometry.png" style="position: absolute; z-index: -1; left: -2px; top: -2px; cursor: pointer;"></div>',offset:new AMap.Pixel(-6,-7)},n={content:'<div style="width: 13px; height: 13px; overflow: hidden; position: relative; z-index: 1;"><img src="/assets/img/stadiometry.png" style="position: absolute; z-index: -1; left: -2px; top: -2px; cursor: pointer;"></div>',offset:new AMap.Pixel(-6,-7)},r={content:'<div style="width: 13px; height: 13px; overflow: hidden; position: relative; z-index: 1;"><img src="/assets/img/stadiometry.png" style="position: absolute; z-index: -1; left: -2px; top: -2px; cursor: pointer;"></div>',offset:new AMap.Pixel(-6,-7)},s={strokeStyle:"solid",strokeColor:"#fe383a",strokeOpacity:.8,strokeWeight:3},c={startMarkerOptions:e,midMarkerOptions:n,endMarkerOptions:r,lineOptions:s};o.rangingTool||(o.rangingTool=new AMap.RangingTool(themap,c)),i.mapToolLayer.ranging=!0,o.rangingTool.turnOn(),themap.set("isHotspot",!1),AMap.event.addListener(o.rangingTool,"move",function(a){var e=a.distance||0;t.changePromptContent(e)}),AMap.event.addListener(o.rangingTool,"addnode",function(a){t.rangingNode++}),AMap.event.addListener(o.rangingTool,"removenode",function(a){t.rangingNode--}),AMap.event.addListener(o.rangingTool,"end",function(e){i.mapToolLayer.ranging=!1,o.rangingTool.turnOff(),a(".ranging").removeClass("active"),themap.set("isHotspot",!0),t.removePromptMarker(),t.rangingNode=0}),AMap.event.addListener(o.rangingTool,"cancel",function(a){t.rangingNode=0,t.changePromptContent()})})},offRangingTool:function(){i.mapToolLayer.ranging&&(o.rangingTool.turnOff(),i.mapToolLayer.ranging=!1)},addPromptMarker:function(t){var a=this,e="marker-prompt",t="单击确定起点",i={id:"prompt-marker",map:themap,zIndex:999,content:a.setPromptContent(t),offset:{x:22,y:12}},n=new AMap.Marker(i);n.id=e,o.promptMarker=n,n.hide(),a.mousemove=AMap.event.addListener(themap,"mousemove",function(t){var e=t.lnglat;a.changePromptPosition(e)})},removePromptMarker:function(){var t=this;o.promptMarker&&(o.promptMarker.setMap(null),o.promptMarker=null),AMap.event.removeListener(t.mousemove)},changePromptPosition:function(t){o.promptMarker&&(o.promptMarker.setPosition(t),o.promptMarker.show())},setPromptContent:function(t){var a=document.createElement("div");a.className="tool-prompt-marker zdeps-1";var e=document.createElement("div");return e.className="prompt-content",e.innerHTML=t,a.appendChild(e),a},changePromptContent:function(t){var a=this,e="<div>总长："+a.formatRulerDistance(t,"color:#FE383A;font-weight:bold")+'</div><div style="color: #7E7E7E;">单击继续,双击或右键结束</div>';if(a.rangingNode>=1){var i=a.setPromptContent(e);o.promptMarker.setContent(i)}else{var i=a.setPromptContent("单击确定起点");o.promptMarker.setContent(i)}},formatRulerDistance:function(t,a){var e=/^[\d.]+$/;if(e.test(t)){if(1e3>t){var i=t.toFixed(0);return"<span "+(a?'style="'+a+'"':"")+">"+i+"</span>米"}var i=(t/1e3).toFixed(1);return"<span "+(a?'style="'+a+'"':"")+">"+i+"</span>公里"}return t},setFullscreen:function(){i.fullscreen},openSubway:function(){}};t.exports=r}).call(a,e(1),e(2))},110:function(t,a,e){(function(t){!function(t){var a={init:function(a){this.Ranged.options=t.extend({},this.Ranged.defaults,a);var e=[];return this.each(function(){var a=t(this),i=a.data("Ranged");i||(a.is("input[type=range]")&&(a=a.Ranged("_extendInputRanged")),a.data("Ranged",{target:a,options:a.Ranged.options}),t(document).data("Ranged",{}),a.Ranged("_build"),a.Ranged("_calculate"),a.Ranged("_bindEvents"),e.push(a[0]))}),t(e)},_extendInputRanged:function(){this.Ranged.options.min=+this.attr("min"),this.Ranged.options.max=+this.attr("max"),this.Ranged.options.step=+this.attr("step"),this.Ranged.options.value=+this.attr("value");var a=t("<div>",{id:this.attr("id"),"class":this.attr("class")?this.attr("class")+" "+this.Ranged.options.rangedClass:this.Ranged.options.rangedClass});return this.replaceWith(a),a},_build:function(){var a,e;return this.addClass(this.Ranged.options.rangedClass),a=this.data("Ranged").options.createBar?t("<span>",{"class":this.data("Ranged").options.barClass}).appendTo(this):this.find("."+this.data("Ranged").options.barClass),this.data("Ranged").options.createThumb?(e=t("<span>",{"class":this.data("Ranged").options.thumbClass,tabindex:0,role:"slider","aria-valuemax":this.data("Ranged").options.max,"aria-valuemin":this.data("Ranged").options.min,"aria-valuenow":this.data("Ranged").options.value,"aria-valuetext":this.data("Ranged").options.value}).appendTo(this),e.html('<div class="thumb-time-wrap"><div class="thumb-time"></div></div>')):e=this.find("."+this.data("Ranged").options.thumbClass),this.data("Ranged").bar=a,this.data("Ranged").thumb=e,this},_bindEvents:function(){return this.data("Ranged").thumb.on("mousedown",this,function(a){var e=a.data;t(document).data("Ranged").active=e,e.data("Ranged").dragStartX=a.clientX,e.data("Ranged").dragStartW=parseInt(e.data("Ranged").bar.css("width"),10),e.data("Ranged").options.onDragStart.apply(e,[e.Ranged("value")])}),t(document).data("Ranged").events||(t(document).on("mousemove",function(a){var e=t(document).data("Ranged").active;if(e){var i=Math.max(0,Math.min(e.data("Ranged").width,e.data("Ranged").dragStartW+(a.clientX-e.data("Ranged").dragStartX))),n=e.Ranged("_pxToValue",i);e.Ranged("value")!=n&&(e.Ranged("value",n),e.data("Ranged").options.onChange.apply(e,[n]))}}).on("mouseup",function(){var a=t(document).data("Ranged").active;a&&(t(document).data("Ranged").active=null,a.data("Ranged").options.onDragEnd.apply(a,[a.Ranged("value")]))}).data("Ranged").events=!0),this},value:function(t){return void 0===t?this.data("Ranged").thumb.attr("aria-valuenow"):(this.data("Ranged").bar.css("width",this.Ranged("_valueToPx",t)),this.data("Ranged").thumb.attr("aria-valuenow",t),this.data("Ranged").thumb.attr("aria-valuetext",t),this)},_calculate:function(){this.data("Ranged").width=this.width();var t=this.data("Ranged").options.max-this.data("Ranged").options.min;this.data("Ranged").stepWidth=this.data("Ranged").options.step*(this.data("Ranged").width/t),this.Ranged("value",this.data("Ranged").options.value)},_pxToStep:function(t){var a=t/this.data("Ranged").stepWidth,e=Math.floor(a),i=a-e;return i>.5&&e++,e},_pxToValue:function(t){return this.Ranged("_stepToValue",this.Ranged("_pxToStep",t))},_stepToPx:function(t){return t*this.data("Ranged").stepWidth},_stepToValue:function(t){return t*this.data("Ranged").options.step+this.data("Ranged").options.min},_valueToStep:function(t){return(t-this.data("Ranged").options.min)/this.data("Ranged").options.step},_valueToPx:function(t){return this.Ranged("_valueToStep",t)*this.data("Ranged").stepWidth}};t.fn.Ranged=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.Ranged"):a.init.apply(this,arguments)},t.fn.Ranged.defaults={min:0,max:1,step:.01,value:0,createBar:!0,createThumb:!0,rangedClass:"ranged",barClass:"ranged-bar",thumbClass:"ranged-thumb",onChange:function(t){},onDragStart:function(t){},onDragEnd:function(t){}},t.fn.Ranged.options={}}(t)}).call(a,e(1))}});