webpackJsonp([0],{30:function(t,e,a){(function(e){var a={formatDistance:function(t){return t=new Number(t).toFixed(2),1e3>t?parseInt(t)+"米":(t/1e3).toFixed(1)+"公里"},parseRoutes:function(t){var e=[];t=t.path?[t.path]:t;for(var a=0;a<t.length;a++){var i=t[a];e[a]={steps:this._parseStep(i.steps),distance:this._parseInt(i.distance),time:this._parseInt(i.time),policy:i.policy,tolls:this._parseInt(i.tolls),tolls_distance:this._parseInt(i.toll_distance)}}return e},parseStep:function(t){for(var e=[],a=0;a<t.length;a++){var i=t[a],n=i.path;e[a]={start_location:n[0],end_location:n[n.length-1],instruction:this._parseString(i.instruction),orientation:this._parseString(i.orientation),road:this._parseString(i.road),distance:this._parseInt(i.distance),tolls:this._parseInt(i.tolls),toll_distance:this._parseInt(i.toll_distance),toll_road:this._parseString(i.toll_road),time:this._parseInt(i.time),path:n,action:this._parseString(i.action),assistant_action:this._parseString(i.assistant_action)}}return e},str2LngLat:function(t){var e=t.split(",");return new AMap.LngLat(e[0],e[1])},multi2Lnglat:function(t){for(var e=[],a=t.split(";"),i=0;i<a.length;i++)e[i]=this._str2LngLat(a[i]);return e},multiStr2Lnglat:function(t){var e=[];if(t)for(var a=t.split(","),i=0;i<a.length-1;i+=2)e.push(new AMap.LngLat(a[i],a[i+1]));return e},multiStr2LnglatCar:function(t){var a=[];if(t){var i=t;e.isArray(t)||(i=JSON.parse(t));for(var n=0;n<i.length-1;n+=2)a.push(new AMap.LngLat(i[n],i[n+1]))}return a},parseString:function(t){var e="object"==typeof t||"undefined"==typeof t?"":t;return e},parseInt:function(t){var e=parseInt(t,10);return isNaN(e)?0:e},formatTime:function(t){if(!t||"0"==t)return"";if(t/=60,60>=t)return parseInt(Math.ceil(t))+"分钟";var e=Math.floor(t/60)+"小时";return t%60!==0&&(0===Math.floor(t%60)||(e+=Math.floor(t%60)+"分钟")),e},formatTimeByMinute:function(t){if(!t||"0"==t)return"";var t=Number(t);return t/60>1?Math.floor(t/60)+"小时"+t%60+"分钟":t%60+"分钟"},formatCost:function(t){return t&&"0"!=t?parseInt(t)+"元":""},getCurTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),r=t.getMinutes().toString();return 1==r.length&&(r="0"+r),{date:e+"-"+a+"-"+i,time:n+"-"+r}},color2rgb:function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(t&&e.test("#"+t)){t="#"+t.toLowerCase();for(var a=[],i=1;7>i;i+=2)a.push(parseInt("0x"+t.slice(i,i+2)));return a.join(",")}}};t.exports=a}).call(e,a(1))},31:function(t,e,a){(function(e,i){var n=a(48),r=a(47),o=a(49),s=a(13),l=a(7),p=a(9),u=(a(37),{redir:function(t,a){var n=this,r={pos:t,type:a},o=e.dir.from,s=e.dir.to,l=e.dir.via,p=e.dir.policy,u=e.dir.type;n.planRegeo(r,function(t){"from"==a?o=t:"to"==a&&(s=t);var n={type:u,policy:p,from:o,to:s,via:l};e.fwd("/dir?"+i.param(n))})},clearDir:function(){var t=this,e=s;e.dragRoute&&e.dragRoute.destroy();var a=e.polylinePlan;i.each(a,function(t,e){e.setMap(null)}),a={},e.polylineDatasPlan={};var n=e.markers;i.each(n,function(t,e){e.setMap(null)}),n={},e.poiDatas={},t.clearAllRoute(),t.clearCarTmc()},clearAllRoute:function(){var t=s;t.polylineRoute,t.polylineRouteTop,i.each(t.polylineRouteTop,function(t,e){e.setMap(null)}),i.each(t.polylineRoute,function(t,e){e.setMap(null)}),t.polylineRoute={},t.polylineRouteTop={}},clearCarTmc:function(){var t=s,e=t.polylineRouteTmc;i.each(e,function(t,e){i.each(e,function(t,e){e.setMap(null)})}),e={}},clearBusEta:function(){var t=s,e=t.polylineBusEta;i.each(e,function(t,e){e.setMap(null)}),e={}},closeDir:function(){var t=s,a=e.dir.type,i=t.dragRoute,n=t.trans,r=t.walking;i&&i.close(),n&&n.close(),r&&r.close(),"car"==a?i&&i.open():"bus"==a?n&&n.open():"walk"==a&&r&&r.open()},planRegeo:function(t,e){var a=t.pos,i=t.type;p.getRegeoData(a,function(t){var n=t.adcode,r=null,o=null,s=null,l=null;if(t.road_list&&t.road_list.length>0){var p=t.road_list[0];o=p.name,l=""}else o="from"==i?"起点":"to"==i?"终点":"未知道路",l="";r="regeo_"+(new Date).getTime(),s=a.lng+","+a.lat;var u={id:r,name:o,lnglat:s,adcode:n,modxy:l};e(u)})},stepHighlight:function(t){var a=s,n=t,r=a.polylineDatasPlan,o=a.polylinePlan;if("poly-drive"==r["step-"+n].polyType)o["step-"+n].setMap(themap);else{var l="step-"+e.walkState.active;i.each(o,function(t,e){l!=t&&e.setOptions({strokeColor:"#25c2f2",lineCap:"round",lineJion:"round",strokeOpacity:.8,zIndex:51})})}o["step-"+n].setOptions({strokeColor:"#FF0000",lineCap:"round",lineJion:"round",strokeOpacity:.8,zIndex:51})},stepFitviewBus:function(t){var e=s,a="step-"+t,i=e.polylinePlan[a];p.setObjFitView([i])},unStepFitviewBus:function(t){var e=s;e.polylinePlan,p.setObjFitView()},stepHighlightBus:function(t){var e=s,a="step-"+t,i=e.polylineDatasPlan[a],n=e.polylineHighlight;n?n.setPath(i.path):p.addHighlightPolyline(i),p.setObjFitView([e.polylineHighlight])},stepUnHighlightBus:function(){var t=s;t.polylineHighlight&&t.polylineHighlight.setMap(null)},stepUnHighlight:function(t){var a=s,n=t,r=e.dir.type,o=a.polylineDatasPlan,l=a.polylinePlan;o&&(n?"walk"==r?l["step-"+n].setOptions({strokeColor:"#25c2f2",strokeOpacity:.8}):"car"==r&&l["step-"+n].setMap(null):"walk"==r?i.each(l,function(t,e){e.setOptions({strokeColor:"#25c2f2",strokeOpacity:.8})}):"car"==r&&i.each(l,function(t,e){e.setMap(null)}))},routeHighlight:function(t){var a=[],n=[],r=e.dir.type,o=[];if("car"==r)o=e.dirp.routes[t].steps;else if("bus"==r)o=e.dirp.buslist[t].segmentlist;else if("walk"==r)return;i.each(o,function(t,e){var a=e.path||[];n=n.concat(a)}),a.push({type:"polyline-tmp",list:[{path:n}]}),p.addOverlays(a,"noset")},routeHighlightNew:function(t){var a=[],n=[],r=e.dir.type,o=[];if("car"==r)o=e.dirp.path_list&&e.dirp.path_list[t].steps;else if("bus"==r)o="railway"==e.dirp.railtype?e.dirp.routelist&&e.dirp.routelist[t].segmentlist:e.dirp.buslist&&e.dirp.buslist[t].segmentlist;else if("walk"==r)return;i.each(o,function(t,e){var a=e.path||[];n=n.concat(a)}),a.push({type:"polyline-tmp",list:[{path:n}]}),p.addOverlays(a,"noset")},routeUnhighlight:function(){p.clearOverlays(["polyline-tmp"])},creatDirQrcode:function(){var t=(e.dir.to.lnglat&&e.dir.to.lnglat.split(","),e.shareDir("pc_dir")),a="canvas-dirQrcode",n=function(t){l.tplLoad({filename:a,callback:function(e){var a=78;$dirqr=i(".dir_qr"),$dirqr.html("").append(e),i(".dir_qrcode").attr("url",t).html("").qrcode({width:a,height:a,text:t}),$dirqr.slideDown()}}),e.autumncard.url=t,e.autumnshow=!0};e.getShorturl(t,n)},clearDirMenu:function(){u.closeDir(),p.clearAllOverlays(),e.fwd("/dir")}});i.extend(u,n),i.extend(u,r),i.extend(u,o),t.exports=u}).call(e,a(2),a(1))},37:function(t,e,a){(function(t){!function(e){e.fn.qrcode=function(a){function i(t){this.mode=l,this.data=t}function n(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw Error(t.length+"/"+e);for(var a=0;a<t.length&&0==t[a];)a++;this.num=Array(t.length-a+e);for(var i=0;i<t.length-a;i++)this.num[i]=t[i+a]}function o(t,e){this.totalCount=t,this.dataCount=e}function s(){this.buffer=[],this.length=0}var l;i.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},n.prototype={addData:function(t){this.dataList.push(new i(t)),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var t=1,t=1;40>t;t++){for(var e=o.getRSBlocks(t,this.errorCorrectLevel),a=new s,i=0,n=0;n<e.length;n++)i+=e[n].dataCount;for(n=0;n<this.dataList.length;n++)e=this.dataList[n],a.put(e.mode,4),a.put(e.getLength(),p.getLengthInBits(e.mode,t)),e.write(a);if(a.getLengthInBits()<=8*i)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[a][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var a=-1;7>=a;a++)if(!(-1>=t+a||this.moduleCount<=t+a))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(this.modules[t+a][e+i]=a>=0&&6>=a&&(0==i||6==i)||i>=0&&6>=i&&(0==a||6==a)||a>=2&&4>=a&&i>=2&&4>=i?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;8>a;a++){this.makeImpl(!0,a);var i=p.getLostPoint(this);(0==a||t>i)&&(t=i,e=a)}return e},createMovieClip:function(t,e,a){for(t=t.createEmptyMovieClip(e,a),this.make(),e=0;e<this.modules.length;e++)for(var a=1*e,i=0;i<this.modules[e].length;i++){var n=1*i;this.modules[e][i]&&(t.beginFill(0,100),t.moveTo(n,a),t.lineTo(n+1,a),t.lineTo(n+1,a+1),t.lineTo(n,a+1),t.endFill())}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var i=t[e],n=t[a];if(null==this.modules[i][n])for(var r=-2;2>=r;r++)for(var o=-2;2>=o;o++)this.modules[i+r][n+o]=-2==r||2==r||-2==o||2==o||0==r&&0==o?!0:!1}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),a=0;18>a;a++){var i=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=i}for(a=0;18>a;a++)i=!t&&1==(e>>a&1),this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=i},setupTypeInfo:function(t,e){for(var a=p.getBCHTypeInfo(this.errorCorrectLevel<<3|e),i=0;15>i;i++){var n=!t&&1==(a>>i&1);6>i?this.modules[i][8]=n:8>i?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;15>i;i++)n=!t&&1==(a>>i&1),8>i?this.modules[8][this.moduleCount-i-1]=n:9>i?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,i=this.moduleCount-1,n=7,r=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;2>s;s++)if(null==this.modules[i][o-s]){var l=!1;r<t.length&&(l=1==(t[r]>>>n&1)),p.getMask(e,i,o-s)&&(l=!l),this.modules[i][o-s]=l,n--,-1==n&&(r++,n=7)}if(i+=a,0>i||this.moduleCount<=i){i-=a,a=-a;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(t,e,a){for(var e=o.getRSBlocks(t,e),i=new s,r=0;r<a.length;r++){var l=a[r];i.put(l.mode,4),i.put(l.getLength(),p.getLengthInBits(l.mode,t)),l.write(i)}for(r=t=0;r<e.length;r++)t+=e[r].dataCount;if(i.getLengthInBits()>8*t)throw Error("code length overflow. ("+i.getLengthInBits()+">"+8*t+")");for(i.getLengthInBits()+4<=8*t&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*t||(i.put(n.PAD0,8),i.getLengthInBits()>=8*t));)i.put(n.PAD1,8);return n.createBytes(i,e)},n.createBytes=function(t,e){for(var a=0,i=0,n=0,o=Array(e.length),s=Array(e.length),l=0;l<e.length;l++){var u=e[l].dataCount,d=e[l].totalCount-u,i=Math.max(i,u),n=Math.max(n,d);o[l]=Array(u);for(var c=0;c<o[l].length;c++)o[l][c]=255&t.buffer[c+a];for(a+=u,c=p.getErrorCorrectPolynomial(d),u=new r(o[l],c.getLength()-1).mod(c),s[l]=Array(c.getLength()-1),c=0;c<s[l].length;c++)d=c+u.getLength()-s[l].length,s[l][c]=d>=0?u.get(d):0}for(c=l=0;c<e.length;c++)l+=e[c].totalCount;for(a=Array(l),c=u=0;i>c;c++)for(l=0;l<e.length;l++)c<o[l].length&&(a[u++]=o[l][c]);for(c=0;n>c;c++)for(l=0;l<e.length;l++)c<s[l].length&&(a[u++]=s[l][c]);return a},l=4;for(var p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=p.getBCHDigit(e)-p.getBCHDigit(p.G15);)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=p.getBCHDigit(e)-p.getBCHDigit(p.G18);)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case 0:return 0==(e+a)%2;case 1:return 0==e%2;case 2:return 0==a%3;case 3:return 0==(e+a)%3;case 4:return 0==(Math.floor(e/2)+Math.floor(a/3))%2;case 5:return 0==e*a%2+e*a%3;case 6:return 0==(e*a%2+e*a%3)%2;case 7:return 0==(e*a%3+(e+a)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),a=0;t>a;a++)e=e.multiply(new r([1,u.gexp(a)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case 1:return 10;case 2:return 9;case l:return 8;case 8:return 8;default:throw Error("mode:"+t)}else if(27>e)switch(t){case 1:return 12;case 2:return 11;case l:return 16;case 8:return 10;default:throw Error("mode:"+t)}else{if(!(41>e))throw Error("type:"+e);switch(t){case 1:return 14;case 2:return 13;case l:return 16;case 8:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,i=0;e>i;i++)for(var n=0;e>n;n++){for(var r=0,o=t.isDark(i,n),s=-1;1>=s;s++)if(!(0>i+s||i+s>=e))for(var l=-1;1>=l;l++)0>n+l||n+l>=e||0==s&&0==l||o==t.isDark(i+s,n+l)&&r++;r>5&&(a+=3+r-5)}for(i=0;e-1>i;i++)for(n=0;e-1>n;n++)r=0,t.isDark(i,n)&&r++,t.isDark(i+1,n)&&r++,t.isDark(i,n+1)&&r++,t.isDark(i+1,n+1)&&r++,(0==r||4==r)&&(a+=3);for(i=0;e>i;i++)for(n=0;e-6>n;n++)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(a+=40);for(n=0;e>n;n++)for(i=0;e-6>i;i++)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(a+=40);for(n=r=0;e>n;n++)for(i=0;e>i;i++)t.isDark(i,n)&&r++;return t=Math.abs(100*r/e/e-50)/5,a+10*t}},u={glog:function(t){if(1>t)throw Error("glog("+t+")");return u.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return u.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},d=0;8>d;d++)u.EXP_TABLE[d]=1<<d;for(d=8;256>d;d++)u.EXP_TABLE[d]=u.EXP_TABLE[d-4]^u.EXP_TABLE[d-5]^u.EXP_TABLE[d-6]^u.EXP_TABLE[d-8];for(d=0;255>d;d++)u.LOG_TABLE[u.EXP_TABLE[d]]=d;return r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var i=0;i<t.getLength();i++)e[a+i]^=u.gexp(u.glog(this.get(a))+u.glog(t.get(i)));return new r(e,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var e=u.glog(this.get(0))-u.glog(t.get(0)),a=Array(this.getLength()),i=0;i<this.getLength();i++)a[i]=this.get(i);for(i=0;i<t.getLength();i++)a[i]^=u.gexp(u.glog(t.get(i))+e);return new r(a,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(t,e){var a=o.getRsBlockTable(t,e);if(void 0==a)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=a.length/3,n=[],r=0;i>r;r++)for(var s=a[3*r+0],l=a[3*r+1],p=a[3*r+2],u=0;s>u;u++)n.push(new o(l,p));return n},o.getRsBlockTable=function(t,e){switch(e){case 1:return o.RS_BLOCK_TABLE[4*(t-1)+0];case 0:return o.RS_BLOCK_TABLE[4*(t-1)+1];case 3:return o.RS_BLOCK_TABLE[4*(t-1)+2];case 2:return o.RS_BLOCK_TABLE[4*(t-1)+3]}},s.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,e){for(var a=0;e>a;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},"string"==typeof a&&(a={text:a}),a=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},a),this.each(function(){var i;if("canvas"==a.render){i=new n(a.typeNumber,a.correctLevel),i.addData(a.text),i.make();var r=document.createElement("canvas");r.width=a.width,r.height=a.height;for(var o=r.getContext("2d"),s=a.width/i.getModuleCount(),l=a.height/i.getModuleCount(),p=0;p<i.getModuleCount();p++)for(var u=0;u<i.getModuleCount();u++){o.fillStyle=i.isDark(p,u)?a.foreground:a.background;var d=Math.ceil((u+1)*s)-Math.floor(u*s),c=Math.ceil((p+1)*s)-Math.floor(p*s);o.fillRect(Math.round(u*s),Math.round(p*l),d,c)}}else for(i=new n(a.typeNumber,a.correctLevel),i.addData(a.text),i.make(),r=e("<table></table>").css("width",a.width+"px").css("height",a.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",a.background),o=a.width/i.getModuleCount(),s=a.height/i.getModuleCount(),l=0;l<i.getModuleCount();l++)for(p=e("<tr></tr>").css("height",s+"px").appendTo(r),u=0;u<i.getModuleCount();u++)e("<td></td>").css("width",o+"px").css("background-color",i.isDark(l,u)?a.foreground:a.background).appendTo(p);i=r,t(i).appendTo(this)})}}(t)}).call(e,a(1))},47:function(t,e,a){(function(e,i,n,r){var o=a(13),s=a(30),l=a(24),p=a(9),u={timeTag:{0:"正常",1:"可能存在风险",2:"已经停运",3:"乘坐时间太早"},busTimeTag:{0:"正常",2:"已经停运",3:"可能早班车未发出",4:"可能错过末班车"},minTag:{0:"",1:"时间短",2:"步行少",4:"换乘少",7:"最佳",8:"直达"},minTagSign:{0:"",1:"lesstime",2:"lesswalk",4:"lesstransfer",7:"best",8:"nonstop"},etaStatus:{0:"",1:"畅通",2:"缓行",3:"拥堵",4:"非常拥堵"},etaStatusSign:{0:"",1:"smooth",2:"slow",3:"jam",4:"jamer"},priceType:{0:"不分仓位级别",7:"一等",8:"二等",9:"特等",10:"硬座",11:"软座",12:"软座1等座",13:"软座2等座",14:"硬卧上铺",15:"硬卧中铺",16:"硬卧下铺",17:"软卧上铺",18:"软卧下铺",19:"高级软卧上铺",20:"高级软卧下铺",21:"商务",22:"座席",23:"卧席上铺",24:"卧席中铺",25:"卧席下铺",30:"经济舱",31:"商务舱",40:"经济舱",41:"3等舱",42:"2等舱",43:"豪华舱"},railType:{2010:"普",2011:"G",2012:"D",2013:"C",2014:"Z",2015:"T",2016:"K",2017:"临",2018:"S"},dirBus:function(t){var a=this,i=o,n=e.dir.from,r=e.dir.to,s=e.dir.policy;e.dir.type||"bus",AMap.service(["AMap.Transfer"],function(){var t=new AMap.Transfer({city:n.adcode||"110000",policy:s,nightflag:!0,extensions:"all"});i.trans=t;var o=n.lnglat,l=null;l=new AMap.LngLat(o.split(",")[0],o.split(",")[1]);var p=r.lnglat,u=null;u=new AMap.LngLat(p.split(",")[0],p.split(",")[1]),t.search(l,u),AMap.event.addListener(t,"complete",function(t){var i=a.buildBusData(t);i.frominfo=n,i.toinfo=r,e.dirp=i}),AMap.event.addListener(t,"error",function(t){e.dirp=null})})},buildBusData:function(t){var a={};if("OK"==t.info){a={type:"bus",taxi_cost:t.taxi_cost,plans:[]};var r=e.dir.from.lnglat.split(","),o=e.dir.to.lnglat.split(","),p=t.plans;p&&p.length>0&&(i.each(p,function(t,p){p.buses=[],p.planTitle=[],p.walk_distance=0;var u=0,d=p.segments.length,c={};i.each(p.segments,function(t,a){if("METRO_RAIL"==a.transit_mode&&(a.transit_mode="subway"),0===t&&(a.name=e.dir.from.name),""!==a.transit_mode&&"WALK"===a.transit_mode)p.segments[t-1]?(a.location=p.segments[t-1].transit.off_station.location,a.id="marker-plan-"+t,a.markerType="marker-bus-"+p.segments[t-1].transit_mode.toLowerCase()+"Stop",a.pre_on_station=p.segments[t-1].on_station,a.pre_off_station=p.segments[t-1].off_station,a.pre_lines=p.segments[t-1].lines):(a.location=new AMap.LngLat(r[0],r[1]),a.id="marker-plan-"+t,a.markerType="marker-bus-from",a.type="from"),a.next_on_station=p.segments[t+1]&&p.segments[t+1].transit.on_station,p.walk_distance+=a.distance,a.polyType="poly-bus-walk";else{u++,p.buses.push(a),a.location=a.transit.on_station.location,a.id="marker-plan-"+t,p.segments[t-1]?a.markerType="marker-bus-"+a.transit_mode.toLowerCase()+"Stop":(a.location=new AMap.LngLat(r[0],r[1]),a.markerType="marker-bus-from");var n=a.transit.lines[0].name.replace(/\(.*\)/gi,"");p.planTitle.push({name:n,type:a.transit_mode.toLowerCase()}),a.polyType="poly-bus-bus"}t==d-1&&""!==a.transit_mode&&("SUBWAY"===a.transit_mode||"BUS"===a.transit_mode)&&(c={type:a.transit_mode.toLowerCase()+"-last",id:"marker-plan-"+d,markerType:"marker-bus-"+a.transit_mode.toLowerCase()+"Stop",name:a.transit.off_station.name,pre_lines:a.transit.lines,location:a.transit.off_station.location,pre_on_station:a.transit.on_station,pre_off_station:a.transit.off_station}),a.preType=p.segments[t-1]?p.segments[t-1].transit_mode.toLowerCase():"",a.nextType=p.segments[t+1]?p.segments[t+1].transit_mode.toLowerCase():"",a.style=a.transit_mode.toLowerCase(),a.distance_num=a.distance,a.distance=s.formatDistance(a.distance),a=i.extend(a,a.transit)}),n.isEmpty(c)||p.segments.push(c),p.segments.push({id:"marker-plan-"+p.segments.length,location:new AMap.LngLat(o[0],o[1]),markerType:"marker-bus-to",type:"to",name:e.dir.to.name}),i.each(p.segments,function(t,e){e.on_station&&(e.on_station.planid="marker-plan-"+t),e.off_station&&(e.off_station.planid="marker-plan-"+(t+1))}),a.plans[t]={buses:p.buses,planTitle:p.planTitle,segments:p.segments,seglength:p.segments.length,path:p.path,distance_num:p.distance,distance:s.formatDistance(p.distance),transit_distance_num:p.transit_distance,transit_distance:s.formatDistance(p.transit_distance),walk_distance_num:p.walk_distance,walk_distance:s.formatDistance(p.walk_distance),time_num:p.time,time:s.formatTime(p.time),transferNum:u,cost:p.cost,feedBackUrl:l.dir(p.planTitle)}}),a.current=a.current||0)}return a},addDirBusOverlays:function(t){var a=e.dirp,i=(a.frominfo.lnglat.split(","),a.toinfo.lnglat.split(","),[]);i.push({type:"polyline",list:a.plans[t].segments}),i.push({type:"marker",list:a.plans[t].segments}),p.clearAllOverlays(),p.addOverlays(i)},addDirBusOverlaysNew:function(t){var a=e.dirp,i=(a.frominfo.lnglat.split(","),a.toinfo.lnglat.split(","),[]),n=null,r=null;if("railway"==a.railtype){if(!(a.routelist&&a.routelist.length>0))return;n=a.routelist[t].segmentlist,r=a.routelist[t].mapstops}else{if(!(a.buslist&&a.buslist.length>0))return;n=a.buslist[t].segmentlist,r=a.buslist[t].mapstops}i.push({type:"polyline",list:n}),i.push({type:"marker",list:r}),p.clearAllOverlays(),p.addOverlays(i)},getBusData:function(t){var a,n=this,r=e.dir.from,o=e.dir.to,s=e.dir.policy;e.dir.type||"bus",a="now"===e.dir.dateTime?[]:e.dir.dateTime.split("|");var l=a[0]||"",p=a[1]||"",u={night:1,group:1,pure_walk:1,date:l,time:p,type:s,eta:1};if(r.lnglat&&o.lnglat){var d=r.lnglat.split(","),c=o.lnglat.split(","),f=r.id&&r.id.split("-")[0],m=o.id&&o.id.split("-")[0],h=r.adcode,g=o.adcode,v={x1:d[0]||"",y1:d[1]||"",poiid1:f||"",ad1:h||"",x2:c[0]||"",y2:c[1]||"",poiid2:m||"",ad2:g||""};u=i.extend(u,v),i.get(e.service.navBus+i.param(u)).done(function(t){e.dirapip=i.extend(!0,{},t),n.buildBusDataNew(t)})}},buildBusDataNew:function(t){var a=t.data,r={},o=e.dir.from,l=e.dir.to;if(a&&"1"==a.code){if(a.taxitime_text=s.formatTime(a.taxitime)||"",a.taxicost_text=s.formatCost(a.taxicost)||"",a.type="bus",a.current="0",a.frominfo=i.extend(!0,{},e.dir.from),a.frominfo.id="marker-plan-0",a.toinfo=i.extend(!0,{},e.dir.to),a.frominfo.markerType="marker-bus-from",a.frominfo.type="from",a.frominfo.location=s.str2LngLat(a.frominfo.lnglat),a.toinfo.markerType="marker-bus-to",a.toinfo.type="to",a.toinfo.location=s.str2LngLat(a.toinfo.lnglat),"0"!=a.count){var p=a.buslist||a.taxilist;if(p.length>0&&a.routelist.length>0)a.railtype="railway",a.count=a.routelist.length,u.buildRailroute(a),i.each(a.routelist,function(t,e){var a=e.segments;if(!n.isEmpty(a)){u.fuseBusRail(e);var r=1;i.each(a,function(t,e){var a=[];"rail"==e.bustype?a.push(e):a=e.segmentlist,i.each(a,function(t,e){n.isEmpty(e.startinfo)||(e.startinfo.id="marker-plan-"+r,r++),n.isEmpty(e.endinfo)||(e.endinfo.id="marker-plan-"+r,r++)})})}}),r=a;else if(a.buslist.length>0&&0==a.routelist.length){var d=[],c=i.extend(!0,{},a.frominfo),f=i.extend(!0,{},a.toinfo);i.each(a.buslist,function(t,e){n.isEmpty(e.segmentlist)||d.push(u.buildBuslist(e,c,f))}),a.railtype="bus",a.count=d.length,a.buslist=d,r=a}else r.type="bus",r.msg="no result",r.buslist=[]}}else r.type="bus";o.id=o.id&&o.id.split("-")[0]+"-from"||"from",l.id=l.id&&l.id.split("-")[0]+"-to"||"to",e.dirp=r},buildAlterBus:function(t){},buildBuslist:function(t,e,a){var r=i.extend(!0,{},e);toinfo=i.extend(!0,{},a),t.alllength=s.parseInt(t.allfootlength),t.allfootlength_text=s.formatDistance(t.allfootlength),t.expense_text=s.formatCost(t.expense),t.expensetime_text=s.formatTime(t.expensetime),t.min_tag_text=u.minTag[t.min_tag],t.min_tag_sign=u.minTagSign[t.min_tag],t.time_tag_text=u.timeTag[t.time_tag],t.endfootlength_text=s.formatDistance(t.endfootlength),t.endfoottime_text=s.formatTime(t.endfoottime),t.etastatus_text=u.etaStatus[t.etastatus]||"",t.etastatus_sign=u.etaStatusSign[t.etastatus]||"",t.transferNum=t.segmentlist.length,t.title=[];var o=t.endwalk;if(!n.isEmpty(o)&&o.infolist.length>0){var p=[],d=0;i.each(o.infolist,function(t,e){p=p.concat(s.multiStr2Lnglat(e.coord)),d+=s.parseInt(e.distance)}),o.end="终点",o.sign="end",o.foottime_text=t.endfoottime_text,o.path=p,o.distance_text=s.formatDistance(d),o.bustype="walk",o.type="walk",o.polyType="poly-bus-walk"}var c=t.segmentlist,f=[],m=[];if(n.isEmpty(r)||m.push(r),c&&c.length>0){var h=1;i.each(c,function(e,a){var r=null,o=[];a.segindex=e,"4"==a.bus_time_tag?r="(末班"+a.endtime+")":"3"==a.bus_time_tag&&(r="(首班"+a.starttime+")"),o.push(a.bus_key_name),t.alllength+=s.parseInt(a.driverlength),a.rgb=s.color2rgb(a.color),a.path=s.multiStr2Lnglat(a.drivercoord),a.driverlength_text=s.formatDistance(a.driverlength),a.drivertime_text=s.formatTime(a.drivertime),a.footlength_text=s.formatDistance(a.footlength),a.foottime_text=s.formatTime(a.foottime),a.bus_time_tag_text=u.busTimeTag[a.bus_time_tag],a.bustypepre=c[e-1]&&c[e-1].bustype||"",a.busdirection=a.busname.split("--")[1].split(")")[0]||"";var l=a.bustype;"1"==l||"5"==l||"6"==l||"7"==l||"8"==l||"16"==l||"17"==l||"18"==l?(a.type="bus",a.polyType="poly-bus-bus"):(a.type="subway",a.polyType="poly-bus-subway");var p={name:a.startname,id:"marker-plan-"+h,location:a.path[0],line:a.busname,lineid:a.busid,type:a.type,markerType:"marker-bus-"+a.type+"Stop",inport:a.inport,outport:a.outport,startname:a.startname,endname:a.endname};a.startinfo=i.extend(!0,{},p),h++,m.push(i.extend(!0,{},p));var d={name:a.endname,id:"marker-plan-"+h,location:a.path[a.path.length-1],line:a.busname,lineid:a.busid,type:a.type,markerType:"marker-bus-"+a.type+"Stop",inport:a.inport,outport:a.outport,startname:a.startname,endname:a.endname};a.endinfo=i.extend(!0,{},d),h++,m.push(i.extend(!0,{},d)),a.passdepot=[];var g=[];g=s.multiStr2Lnglat(a.passdepotcoord),passid=a.passdepotid.split(" "),passname=a.passdepotname.split(" "),i.each(g,function(t,e){a.passdepot.push({name:passname[t],id:passid[t],coord:e})});var v=a.alterlist;if(n.isEmpty(v)||i.each(v,function(t,e){o.length<3&&o.indexOf(e.bus_key_name)<0&&o.push(e.bus_key_name),e.driverlength_text=s.formatDistance(e.driverlength),e.drivertime_text=s.formatTime(e.drivertime),e.footlength_text=s.formatDistance(e.footlength),e.foottime_text=s.formatTime(e.foottime),e.passdepot=[];var a=[];a=s.multiStr2Lnglat(e.passdepotcoord),passid=e.passdepotid.split(" "),passname=e.passdepotname.split(" "),i.each(a,function(t,a){e.passdepot.push({name:passname[t],id:passid[t],coord:a})})}),t.title.push({type:a.bustype,name:o.length>1?o.join("/")+"等":o,color:a.color,time_tag:a.bus_time_tag,time:r}),!n.isEmpty(a.eta)){var y=s.multiStr2Lnglat(a.eta.etacoords);i.each(a.eta.lnk,function(t,e){var a=s.parseInt(e.sidx),i=s.parseInt(e.eidx);e.path=y.slice(a,i)})}var _={};if("1"==a.transfertype?_.type="transfer":"2"==a.transfertype?_.type="bustransfer":n.isEmpty(a.walk)||(_.type="walk"),!n.isEmpty(a.walk)){var b=a.walk;if(b.infolist.length>0){var k=[],w=0;i.each(b.infolist,function(t,e){k=k.concat(s.multiStr2Lnglat(e.coord)),w+=s.parseInt(e.distance)}),b.path=k,b.distance=w,b.foottime=a.foottime,b.distance_text=s.formatDistance(w),b.foottime_text=a.foottime_text,_.path=k,_.polyType="poly-bus-walk",_.distance_text=b.distance_text,_.foottime_text=b.foottime_text,_.dir=b.dir,_.end=a.startname}}n.isEmpty(_)||f.push(_),f.push(a)})}if(t.allbuslength=Number(t.alllength)-Number(t.allfootlength),t.allbuslength_text=s.formatDistance(t.allbuslength),t.alllength_text=s.formatDistance(t.alllength),n.isEmpty(o)||f.push(o),n.isEmpty(toinfo)||m.push(toinfo),i.each(m,function(t,e){e.stepCount=m.length}),r&&(t.frominfo=r),toinfo&&(t.toinfo=toinfo),i.each(m,function(t,e){e.id="marker-plan-"+t}),i.each(f,function(t,e){e.segid="poly-plan-"+t}),t.segmentlist=f,n.isEmpty(m))t.mapstops=[],t.upstation="未知";else{t.mapstops=m;var g=m[1].name,v=m[1].inport&&m[1].inport.name;""!=v&&(g+="("+v+"进)"),t.upstation=g}return t.feedBackUrl=l.dir(t.title),t},buildRailway:function(t){var e=[],a={};a.polyType="poly-bus-rail",
a.type="railway",a.bustype="railway",a.path=[];var r=t.price;if(r.price={},r){var o=r.type.split(" "),l=r.value.split(" ");i.each(o,function(t,e){r.price[u.priceType[e]]=l[t]})}var p={};p.adcode=t.sad,p.location=new AMap.LngLat(t.scord.split(" ")[0],t.scord.split(" ")[1]),p.name=t.sst,p.id=t.sstid,p.markerType="marker-bus-railwayStop",p.line=t.name,p.startname=t.sst,p.starttime=t.sint,p.endname=t.tst,p.endtime=t.tout,p.sin=t.sin,p.sint=t.sint,t.startinfo=i.extend(!0,{},p),e.push(i.extend(!0,{},p)),a.path.push(p.location);var d=[],c=""==t.viastid?null:t.viastid.split(" "),f=t.viast.split(" "),m=""==t.viastcord?"":s.multiStr2LnglatCar(t.viastcord.split(" ")),h=t.viaint.split(" "),g=t.viawait.split(" ");c&&i.each(c,function(t,e){var i={};i.name=f[t],i.wait=g[t],i.id=e,i["int"]=h[t],i.location=m[t],d.push(i),a.path.push(i.location)}),t.viainfo=d;var v={};v.adcode=t.tad,v.location=new AMap.LngLat(t.tcord.split(" ")[0],t.tcord.split(" ")[1]),v.name=t.tst,v.id=t.tstid,v.markerType="marker-bus-railwayStop",v.line=t.name,v.startname=t.sst,v.starttime=t.sint,v.endname=t.tst,v.endtime=t.tout,v.sin=t.tou,v.tout=t.tout,t.endinfo=i.extend(!0,{},v),e.push(i.extend(!0,{},v)),a.path.push(v.location),t.segmentlist=[],t.segmentlist.push(a),t.mapstops=e,t.railType=u.railType[t.type],t.dis_text=s.formatDistance(t.dis),t.time_text=s.formatTimeByMinute(t.time);var y={};if(!n.isEmpty(t.alter)){var _=t.alter.id.split(" "),b=t.alter.name.split(" ");i.each(_,function(t,e){y[e]=b[t]}),y.length=_.length}return t.alterinfo=y,t.hasover=!0,t},buildTaxilist:function(t){var e=[],a={};a.polyType="poly-bus-taxi",a.type="taxi",a.bustype="taxi",a.path=[];var i={};i.location=new AMap.LngLat(t.startpoint.split(",")[0],t.startpoint.split(",")[1]),i.name=t.sname,i.markerType="marker-bus-taxistop",i.line="出租车",i.startname=t.sname,i.endname=t.ename,t.startinfo=i,e.push(i),a.path.push(i.location),a.startinfo=i;var n={};return n.location=new AMap.LngLat(t.endpoint.split(",")[0],t.endpoint.split(",")[1]),n.name=t.ename,n.markerType="marker-bus-taxistop",t.endinfo=n,a.path.push(n.location),t.segmentlist=[],t.segmentlist.push(a),t.mapstops=e,t.length_text=s.formatDistance(t.length),t.drivetime_text=s.formatTime(t.drivetime),t.polycolor=t.color,t},fuseBusRail:function(t){var a=t.segments,n=[],r=[],o=0,l=i.extend(!0,{},e.dir.from),p=i.extend(!0,{},e.dir.to);return l.id="marker-plan-0",l.markerType="marker-bus-from",l.type="from",l.location=s.str2LngLat(l.lnglat),p.markerType="marker-bus-to",p.type="to",p.location=s.str2LngLat(p.lnglat),n.push(i.extend(!0,{},l)),i.each(a,function(t,e){"bus"==e.bustype?e=u.buildBuslist(e):"rail"==e.bustype?(e.hasover||(e=u.buildRailway(e)),e.altercount?o=e.altercount:o+=e.alterinfo.length):"taxi"==e.bustype&&(e=u.buildTaxilist(e));var a=i.extend(!0,{},e);n=n.concat(a.mapstops),r=r.concat(a.segmentlist)}),n.push(i.extend(!0,{},p)),i.each(n,function(t,e){e.id="marker-plan-"+t}),i.each(r,function(t,e){e.segid="poly-plan-"+t}),t.recommend.altercount=o,t.mapstops=[].concat(n),t.segmentlist=[].concat(r),t},buildRailroute:function(t){var e=t.routelist,a=t.buslist,r=t.taxilist;n.isEmpty(e)||i.each(e,function(t,e){e.distance_text=s.formatDistance(e.distance),e.cost_text=s.formatCost(e.cost),e.time_text=s.formatTimeByMinute(e.time);var n=e.segments,o=[],l=[],p={};i.each(n,function(t,e){i.each(e,function(t,e){if("bus"==e[0]){var n=i.extend(!0,{},a[Number(e[1])]);n.bustype="bus",o.push(n)}else if("railway"==e[0]){var s=i.extend(!0,{},e[1]);s.bustype="rail",l.indexOf(s.sst)<0&&l.push(s.sst),p.name||(p.name=s.trip),l.push(s.tst),o.push(s)}else if("taxi"==e[0]){var u=i.extend(!0,{},r[Number(e[1])]);u.bustype="taxi",o.push(u)}})}),e.segments=o,e.plantitle=l,e.recommend=p})},alterBusline:function(t){},getAlterRail:function(t,a,r){if(n.isEmpty(t))toastr.warning("抱歉，暂时未查询到其他车次！");else{var o=t.sstid,s=t.tstid,l=(t.order,{pagenum:"1",pagesize:"100"});l=i.extend(l,t),i.get(e.service.busRailway+i.param(l)).done(function(t){if("1"==t.status){var l=t.data.railways;n.isEmpty(l)?toastr.warning("抱歉，暂时未查询到其他车次！"):(i.each(l,function(t,e){e.altercount=l.length-1,u.buildRailway(e)}),t.data.from=o,t.data.to=s,t.data.defaultorder=r,t.data.alterindex=a||"",e.alterBus=t)}})}},showAlterBox:function(t){r.tplLoad({filename:"dir-plan-busalter",data:t,callback:function(t){$modal=i("#amap_panel_model");var a=i("#indexbox").height()+20,n=a-138-92;n>438&&(n=438),$modal.html("").html(t).show(),i("#alter_list").css("height",n+"px"),e.slimscroll(i(".alter_list"),{height:n,staticHeight:!0})}})},hideAlterBox:function(t){$modal=i("#amap_panel_model"),$modal.html("")},refreshAlterBox:function(t){r.tplLoad({filename:"dir-plan-busalterlist",data:t,callback:function(t){$modal=i("#alter_list"),$modal.html("").html(t).show()}})},dirBusNew:function(t,e){var a=this;a.getBusData()}};t.exports=u,watch(e,"alterBus",function(){var t=e.alterBus;if("1"==t.status){var a=t.data;a.defaultorder?u.showAlterBox(a):u.refreshAlterBox(a)}})}).call(e,a(2),a(1),a(3),a(7))},48:function(t,e,a){(function(e,i,n){var r=a(13),o=a(30),s=a(9),l={action_sign:{"直行":"0","左转":"1","右转":"2","向左前方行驶":"3","向右前方行驶":"4","向左后方行驶":"5","向右后方行驶":"6","左转调头":"7","直行":"8","靠左":"9","靠右":"10","进入环岛":"11","离开环岛":"12","减速行驶":"13","直行":"14"},setDragRouteOpt:function(){var t=e.dir.from.lnglat.split(","),a=e.dir.to.lnglat.split(","),i={startMarkerOptions:{visible:!1,position:new AMap.LngLat(t[0],t[1])},endMarkerOptions:{visible:!1,position:new AMap.LngLat(a[0],a[1])},polyOptions:{isOutline:!0,outlineColor:"#fff",strokeWeight:6,opacity:1,zIndex:9}};return i},dirCar:function(t){var a=this,o=r,s=e.dir.from,l=e.dir.to,p=e.dir.via||[],u=e.dir.policy;e.dir.type||"car",a.from=e.dir.from,a.to=e.dir.to,a.via=e.dir.via,a.policy=e.dir.policy,a.routetype=e.dir.type||"car",themap.plugin(["AMap.DragRoute","AMap.DragRoutePC"],function(){var t=a.setDragRouteOpt(),r=[],d=s.modxy,c=s.lnglat,f=null;f=d?new AMap.LngLat(d.split(",")[0],d.split(",")[1]):new AMap.LngLat(c.split(",")[0],c.split(",")[1]),r.push(f),p&&p.length>0&&i.each(p,function(t,e){if(!n.isEmpty(e)){var a=e.modxy,i=e.lnglat,o=null;o=a?new AMap.LngLat(a.split(",")[0],a.split(",")[1]):new AMap.LngLat(i.split(",")[0],i.split(",")[1]),r.push(o)}});var m=l.modxy,h=l.lnglat,g=null;g=m?new AMap.LngLat(m.split(",")[0],m.split(",")[1]):new AMap.LngLat(h.split(",")[0],h.split(",")[1]),r.push(g);var v=null;o.dragRoute?v=o.dragRoute:(v=o.dragRoute=new AMap.DragRoute(themap,r,u,t),AMap.event.addListener(v,"complete",function(t){var r=t.data,s=a.from,l=a.to,p=a.via,u=a.policy,d=a.routetype;if("OK"==r.info){var c,f,m,h=o.driveStart=v.getStart(),g=o.driveEnd=v.getEnd(),y=v.getPoint(),_=n.clone(v.getWays()),b=[],k=!1,w=!1,L=!1,x=null,T=s.modxy||s.lnglat,A=l.modxy||l.lnglat,D=!1,C=!1;if(_.length>=3&&y.setDraggable(!1),e.direction.refwd)if(o.viaPath&&_.length<o.viaPath.length)D=a.deleIndex(_,o.viaPath);else if(o.viaPath&&_.length==o.viaPath.length){var M=null;Number(r.origin.lng)-Number(T.split(",")[0])!=0&&Number(r.origin.lat)-Number(T.split(",")[1])!=0&&(c=r.origin,M=c,k=!0,x="from"),Number(r.destination.lng)-Number(A.split(",")[0])!=0&&Number(r.destination.lat)-Number(A.split(",")[1])!=0&&(f=r.destination,M=f,w=!0,x="to");for(var B=null,P=0;P<_.length;P++)if(_[P].lng!=o.viaPath[P].lng||_[P].lat!=o.viaPath[P].lat){B=P,m=_[B],o.viaPath=_,M=m,L=!0,x="via";break}}else o.viaPath&&_.length>o.viaPath.length&&(C=a.addIndex(_,o.viaPath),o.viaPath=_);if(D!==!1){p.splice(D,1);var E={type:d,policy:u,from:s,to:l,via:p};e.fwd("/dir?"+i.param(E))}else if(C!==!1){var b=_[C];x="via";var R=function(t){p.length==_.length||p.splice(C,0,t);var a={type:d,policy:u,from:s,to:l,via:p};e.fwd("/dir?"+i.param(a))};a.planRegeo({pos:b,type:x},R)}else if(k||w||L){var b=M,R=function(t){k&&(s=t),w&&(l=t),L&&(p[B]=t);var a={type:d,policy:u,from:s,to:l,via:p};e.fwd("/dir?"+i.param(a))};a.planRegeo({pos:b,type:x},R)}else{o.viaPath=v.getWays()||[],s.id=!n.isEmpty(s.id)&&s.id.split("-")[0]+"-from"||"from",l.id=!n.isEmpty(l.id)&&l.id.split("-")[0]+"-to"||"to",r.frominfo=s,r.toinfo=l,r.viainfo=p;var N=a.buildCarData(r);e.direction.refwd=!0,e.dirp=N,v.addListen||(AMap.event.addListener(h,"click",function(t){e.carState.active="start"}),AMap.event.addListener(g,"click",function(t){e.carState.active="end"}),v.addListen=!0)}}}),AMap.event.addListener(v,"error",function(t){e.dirp=null})),v.search(r,u,t)})},dirCarNew:function(t){var a=this,o=r;e.dir.from,e.dir.to,e.dir.via||[],e.dir.policy,e.dir.type||"car",a.from=e.dir.from,a.to=e.dir.to,a.via=e.dir.via,a.policy=e.dir.policy,a.routetype=e.dir.type||"car",themap.plugin(["AMap.DragRoutePC"],function(){var t=a.setDragRouteOpt(),r=[],s=a.getDirCarFromend("from");r.push(s);var l=a.getDirCarVia();n.isEmpty(l)||i.each(l,function(t,e){r.push(e)});var p=a.getDirCarFromend("to");r.push(p);var u=null;u=o.dragRoute=new AMap.DragRoute(themap,t),AMap.event.addListener(u,"complete",function(t){var r=t.data.data,s=t.data.origin,l=t.data.destination,p=a.from,d=a.to,c=a.via,f=a.policy,m=a.routetype;if("1"==r.code){var h,g,v,y=o.driveStart=u.getStart(),_=o.driveEnd=u.getEnd(),b=u.getPoint(),k=n.clone(u.getWays()),w=[],L=!1,x=!1,T=!1,A=null,D=p.modxy||p.lnglat,C=d.modxy||d.lnglat,M=!1,B=!1;if(k.length>=3&&b.setDraggable(!1),e.direction.refwd)if(o.viaPath&&k.length<o.viaPath.length)M=a.deleIndex(k,o.viaPath);else if(o.viaPath&&k.length==o.viaPath.length){var P=null;Number(s.lng)-Number(D.split(",")[0])!=0&&Number(s.lat)-Number(D.split(",")[1])!=0&&(h=s,P=h,L=!0,A="from"),Number(l.lng)-Number(C.split(",")[0])!=0&&Number(l.lat)-Number(C.split(",")[1])!=0&&(g=l,P=g,x=!0,A="to");for(var E=null,R=0;R<k.length;R++)if(k[R].lng!=o.viaPath[R].lng||k[R].lat!=o.viaPath[R].lat){E=R,v=k[E],o.viaPath=k,P=v,T=!0,A="via";break}}else o.viaPath&&k.length>o.viaPath.length&&(B=a.addIndex(k,o.viaPath),o.viaPath=k);if(M!==!1){c.splice(M,1);var N={type:m,policy:f,from:p,to:d,via:c};e.fwd("/dir?"+i.param(N))}else if(B!==!1){var w=k[B];A="via";var S=function(t){c.length==k.length||c.splice(B,0,t);var a={type:m,policy:f,from:p,to:d,via:c};e.fwd("/dir?"+i.param(a))};a.planRegeo({pos:w,type:A},S)}else if(L||x||T){var w=P,S=function(t){L&&(p=t),x&&(d=t),T&&(c[E]=t);var a={type:m,policy:f,from:p,to:d,via:c};e.fwd("/dir?"+i.param(a))};a.planRegeo({pos:w,type:A},S)}else{o.viaPath=u.getWays()||[],n.isEmpty(p.id)||"from"==p.id?p.id="":p.id=p.id.split("-")[0]+"-from",n.isEmpty(d.id)||"to"==d.id?d.id="":d.id=d.id.split("-")[0]+"-to",r.frominfo=i.extend({},!0,p),r.toinfo=i.extend({},!0,d),r.viainfo=i.extend({},!0,c);var O=a.buildCarDataNew(r);e.direction.refwd=!0,e.dirp=O,y.setPosition(new AMap.LngLat(p.lnglat.split(",")[0],p.lnglat.split(",")[1])),y.show(),_.setPosition(new AMap.LngLat(d.lnglat.split(",")[0],d.lnglat.split(",")[1])),_.show(),u.addListen||(AMap.event.addListener(y,"click",function(t){e.carState.active="start"}),AMap.event.addListener(_,"click",function(t){e.carState.active="end"}),u.addListen=!0)}}}),AMap.event.addListener(u,"error",function(t){e.dirp=null}),u.search(r,{engine_version:"3",policy2:a.policy})})},getDirCarFromend:function(t){var a=null;"from"==t?a=e.dir.from:"to"==t&&(a=e.dir.to);var i=a.lnglat.split(","),r=a.id&&a.id.split("-")[0]||"";return n.isEmpty(a.modxy)||(i=a.modxy.split(",")),{lng:Number(i[0]),lat:Number(i[1]),pid:r}},getDirCarVia:function(){var t=e.dir.via,a=[];return t&&t.length>0&&i.each(t,function(t,e){if(!n.isEmpty(e)){var i=e.lnglat.split(","),r=e.id;a.push({lng:Number(i[0]),lat:Number(i[1]),pid:r})}}),a},buildCarData:function(t){var e=r,a={};if(a.type="car",a.frominfo=t.frominfo,a.toinfo=t.toinfo,"OK"==t.info&&t.routes.length>0){var s=t.origin,l=t.destination;a.routes=o.parseRoutes(t.routes),i.each(a.routes,function(a,r){var p=[];r.planTitle=[];try{var u=n.clone(t.viainfo)}catch(d){console.log(d)}i.each(r.steps,function(t,e){if("到达途经地"===e.assistant_action){var a=r.steps,i={start_location:a[t+1].path[0],end_location:a[t+1].path[0],instruction:"",orientation:"",road:"",distance:0,tolls:0,toll_distance:0,toll_road:"",time:0,path:[a[t+1].path[a[t+1].path.length-1]],action:"到达途经地",assistant_action:"",signs:a[t].signs,polyType:"poly-drive",name:u.pop().name};p.push(i),e.assistant_action=""}else p.push(e)}),i.each(p,function(t,a){r.steps,a.signs||(a.signs=e.routeSign[a.action]||"advance"),a.polyType="poly-drive",a.id="step-"+t,""!=a.road&&r.planTitle.indexOf(a.road)<0&&r.planTitle.push(a.road)}),r.steps=p,r.origin=s,r.destination=l,r.taxi_cost=0,r.distanceNum=r.distance,r.distance=o.formatDistance(r.distance),r.time_num=r.time,r.time=o.formatTime(r.time),r.feedBackUrl=feedback.dir()}),a.current=t.current||0}else a.feedBackUrl=feedback.dir();return a},buildCarDataNew:function(t){var e=this,a=r;t.type="car";var s=t.path_list;if(!n.isEmpty(s)){var l=t.cost&&t.cost.split(",")||[],p=t.distance&&t.distance.split(",")||[],u=t.drivetime&&t.drivetime.split(",")||[],d=t.strategy&&t.strategy.split(","),c=t.trafficlights&&t.trafficlights.split(",")||[];i.each(s,function(t,r){var s=r.path;r.cost=l[t]||"",r.cost_text=o.formatCost(l[t]),r.distance=p[t],r.distance_text=o.formatDistance(p[t]),r.drivetime=u[t],r.drivetime_text=o.formatTime(u[t]),r.strategy=d[t],r.trafficlights=c[t]||"",r.steps=[],r.path_title=e.setPlanTitle(s),i.each(s,function(t,e){(!e.segments||n.isEmpty(e.segments))&&(e.segments=[],e.segments.push(i.extend(!0,{},e))),e.name=e.name||!n.isEmpty(e.segments)&&e.segments[0].name||"无名道路",e.action=e.action||!n.isEmpty(e.segments)&&e.segments[0].action||"0",e.length=o.formatDistance(e.length),e.actionName=a.action[e.action],e.signs=a.routeSign[e.actionName],(!e.segments||n.isEmpty(e.segments))&&(e.segments=[],e.segments.push(e));var s=e.segments;i.each(s,function(t,e){e.action=e.action||"0",e.length=o.formatDistance(e.length),e.actionName=a.action[e.action],e.signs=a.routeSign[e.actionName],e.path=o.multiStr2LnglatCar(e.coor),e.start_location=e.path[0],e.polyType="poly-drive",r.steps.push(e)}),i.each(r.steps,function(t,e){e.id="step-"+t})})})}return t},setPlanTitle:function(t){var e=i.extend([],!0,t);i.each(e,function(t,e){e.nameid=t}),e.length>0&&e.sort(function(t,e){return e.length-t.length});var a=e.splice(0,3);a.sort(function(t,e){return t.nameid-e.nameid});var n=[];return i.each(a,function(t,e){n.push({length:e.length,name:e.name})}),n},addDirCarOverlays:function(t){var a=e.dirp,i=a.frominfo.lnglat.split(","),n=a.toinfo.lnglat.split(","),r=[];r.push({type:"polyline",list:a.routes[t].steps}),r.push({type:"marker",list:[{id:a.toinfo.id,location:new AMap.LngLat(n[0],n[1]),markerType:"marker-drive-to",name:a.toinfo.name},{id:a.frominfo.id,location:new AMap.LngLat(i[0],i[1]),markerType:"marker-drive-from",name:a.frominfo.name}]}),s.clearAllOverlays(!0),s.addOverlays(r)},addDirCarOverlaysNew:function(t){var a=e.dirp,i=a.frominfo.lnglat.split(","),n=a.toinfo.lnglat.split(","),r=[];a.path_list&&a.path_list.length>0&&(r.push({type:"polyline",list:a.path_list[t].steps}),r.push({type:"marker",list:[{id:a.toinfo.id,location:new AMap.LngLat(n[0],n[1]),markerType:"marker-drive-to",name:a.toinfo.name},{id:a.frominfo.id,location:new AMap.LngLat(i[0],i[1]),markerType:"marker-drive-from",name:a.frominfo.name}]}),s.clearAllOverlays(!0),s.addOverlays(r))},setCarRoute:function(t){var e=r,a=e.dragRoute;a&&(e.polylineRouteTmc[t]&&i.each(e.polylineRouteTmc[t],function(t,e){e.setOptions({zIndex:20})}),a.showRoute(t))},showAllRoute:function(){var t=e.carState.activeindex||"0",a=e.dirp.routes,n=[],r=[];i.each(a,function(e,a){if(e!=t){var n=a.steps,o=[];i.each(n,function(t,e){var a=e.path||[];o=o.concat(a)}),r.push({index:e,path:o})}}),n.push({type:"polyline-route",list:r}),s.addOverlays(n,"noset")},showAllRouteNew:function(){var t=e.carState.activeindex||"0",a=e.dirp.path_list,n=[],r=[];i.each(a,function(e,a){if(e!=t){var n=a.steps,o=[];i.each(n,function(t,e){var a=e.path||[];o=o.concat(a)}),r.push({index:e,path:o})}}),n.push({type:"polyline-route",list:r}),s.addOverlays(n,"noset")},showAllRoutesTmc:function(){var t=r,a=e.carState.activeindex||"0",n=t.dragRoute.getRoutes();i.each(n,function(e,n){var r=n.polylines;e!=a?(t.polylineRouteTmc[e]=[],i.each(r,function(a,i){t.polylineRouteTmc[e].push(i),i.setOptions({zIndex:6}),i.setMap(themap)})):i.each(r,function(t,e){e.setOptions({zIndex:10})})})},showAllRoutesTmcNew:function(){var t=r,a=e.carState.activeindex||"0",o=t.dragRoute.getRoutes();i.each(o,function(e,r){var o=r.polylines;n.isEmpty(o)||(e!=a?(t.polylineRouteTmc[e]=[],i.each(o,function(a,i){t.polylineRouteTmc[e].push(i),i.setOptions({strokeOpacity:.9,zIndex:6}),i.setMap(themap)})):i.each(o,function(t,e){e.setOptions({zIndex:10})}))})},deleIndex:function(t,e){var a,n=r,o=[];if(1==n.viaPath.length&&(n.viaPath=[]),t.length>e.length)_arr=t,a=e;else{if(!(t.length<e.length))return!1;_arr=e,a=t}for(var s=0;s<_arr.length;s++)if(a.length>0){var l=!1;i.each(a,function(t,e){e==_arr[s]&&(l=!0)}),l||o.push(s)}else o.push(0);return 1==o.length?o[0]:!1},addIndex:function(t,e){var a,n=[];if(t.length>e.length)_arr=t,a=e;else{if(!(t.length<e.length))return!1;_arr=e,a=t}for(var r=0;r<_arr.length;r++)if(a.length>0){var o=!1;i.each(a,function(t,e){e==_arr[r]&&(o=!0)}),o||n.push(r)}else n.push(0);return 1==n.length?n[0]:!1}};t.exports=l}).call(e,a(2),a(1),a(3))},49:function(t,e,a){(function(e,i,n){var r=a(13),o=a(30),s=a(24),l=a(9),p={dirWalk:function(t){var a=this,i=e.dir.from,n=e.dir.to;e.dir.policy,AMap.service(["AMap.Walking"],function(){var t=(i.modxy,i.lnglat),r=null;r=new AMap.LngLat(t.split(",")[0],t.split(",")[1]);var o=(n.modxy,n.lnglat),s=null;s=new AMap.LngLat(o.split(",")[0],o.split(",")[1]);var l=new AMap.Walking;e.walking=l,l.search(r,s),AMap.event.addListener(l,"complete",function(t){var r=a.buildWalkData(t);i.id=i.id&&i.id.split("-")[0]+"-from"||"from",n.id=n.id&&n.id.split("-")[0]+"-to"||"to",r.frominfo=i,r.toinfo=n,e.dirp=r}),AMap.event.addListener(l,"error",function(t){e.dirp={routes:[]}})})},dirWalkNew:function(){var t=this;t.getWalkData()},getWalkData:function(){var t=e.dir.from,a=e.dir.to,r=(e.dir.policy,e.dir.type||"walk",{lv:"2.5",taxi:1,output:"json"}),o=t.lnglat.split(","),s=a.lnglat.split(","),l=t.id.split("-")[0],p=a.id.split("-")[0],u="";u=l&&!i.isEmpty(l)?l:o[0]+","+o[1];var d="";d=p&&!i.isEmpty(p)?p:s[0]+","+s[1];var c="0",f="0",m=1e6,h=u+","+d+","+c+","+f+","+m,g={poinavi:h,fromX:o[0]||"",fromY:o[1]||"",from_pid:l||"",toX:s[0]||"",toY:s[1]||"",to_pid:p||""};r=n.extend(r,g),n.get(e.service.navFoot+n.param(r)).done(function(t){console.log("navFoot",t)})},buildWalkData:function(t){var e=r;if("ok"==t.info){t.type="walk";var a=t.routes[0],i=a.steps;i&&i.length>0&&(a.planTitle=[],n.each(i,function(t,n){n.signs=e.routeSign[n.action]||"advance",n.polyType="poly-walk",n.id="step-"+t,t<i.length-1&&n.path.push(i[t+1].start_location),""!=n.road&&a.planTitle.indexOf(n.road)<0&&a.planTitle.push(n.road)}),a.distanceNum=a.distance,a.distance=o.formatDistance(a.distance),a.time=o.formatTime(a.time),a.feedBackUrl=s.dir())}return t},buildWalkDataNew:function(){},addDirWalkOverlays:function(t){var a=e.dirp,i=a.frominfo.lnglat.split(","),n=a.toinfo.lnglat.split(","),r=[];r.push({type:"polyline",list:a.routes[t].steps}),r.push({type:"marker",list:[{id:a.toinfo.id,location:new AMap.LngLat(n[0],n[1]),markerType:"marker-walk-to",type:"to",name:a.toinfo.name},{id:a.frominfo.id,location:new AMap.LngLat(i[0],i[1]),markerType:"marker-walk-from",type:"from",name:a.frominfo.name}]}),l.clearAllOverlays(),l.addOverlays(r)},addDirWalkOverlaysNew:function(){}};t.exports=p}).call(e,a(2),a(3),a(1))}});